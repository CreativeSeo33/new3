{% extends 'catalog/base.html.twig' %}

{% block title %}Категория {{ category.name ?? category.slug }} — {{ parent() }}{% endblock %}

{% block catalog_body %}
  <section>
    <div class="container mx-auto px-4 py-8">
      <h1>Категория: {{ category.name ?? category.slug }}</h1>
      {% if category.description %}
        <p>{{ category.description }}</p>
      {% endif %}

      <div
        class="grid grid-cols-1 md:grid-cols-4 gap-6"
        data-controller="facets"
        data-facets-category-id-value="{{ category.id }}"
        data-facets-products-url-value="{{ path('catalog_category_products', { slug: category.slug }) }}"
        data-facets-facets-url-value="{{ path('catalog_facets') }}?category={{ category.id }}"
      >
        <aside class="md:col-span-1">
          <div class="facets-panel border rounded p-3">
            <div data-facets-target="list" class="space-y-3" data-initial-facets='{{ initial_facets_json|default("")|raw }}'></div>
          </div>
        </aside>
        <div class="md:col-span-3 relative" data-facets-target="products">
          <h2>Товары</h2>
          <div id="category-grid-spinner" class="absolute inset-0 flex items-center justify-center z-10" data-size="small" data-color="secondary" data-overlay="true" style="display:none"></div>
          {% if products is defined and products is not empty %}
            {% include 'catalog/category/_grid.html.twig' with { products: products } %}
          {% else %}
            <p>Товаров нет.</p>
          {% endif %}
        </div>
      </div>
    </div>
  </section>
{% endblock %}



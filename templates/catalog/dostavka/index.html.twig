{% extends 'catalog/base.html.twig' %}

{% block title %}Доставка — {{ parent() }}{% endblock %}

{% block catalog_body %}
  <div class="container mx-auto py-12">
    <h1 class="text-2xl font-semibold text-gray-900 mb-6">Доставка</h1>

    <div class="mb-4 text-sm text-gray-600">
      {% if mapCity %}
        Текущий город: <span class="font-medium">{{ mapCity }}</span>
        {% if mapCityId %}
          <span class="ml-2 text-xs text-gray-500">(id: {{ mapCityId }})</span>
        {% endif %}
      {% else %}
        Город не определён — показана карта по умолчанию
      {% endif %}
    </div>

    <div
      class="w-full h-96 rounded-lg border"
      data-controller="yandex-map"
      data-yandex-map-api-key-value="{{ yandexMapsApiKey }}"
      {% if mapLat is not null and mapLon is not null %}
        data-yandex-map-lat-value="{{ mapLat }}"
        data-yandex-map-lon-value="{{ mapLon }}"
      {% endif %}
      data-yandex-map-zoom-value="12"
      {% if pvzPoints is defined %}
        data-yandex-map-points-value='{{ pvzPoints|json_encode(constant("JSON_UNESCAPED_UNICODE"))|e('html_attr') }}'
      {% endif %}
    ></div>

    {% if pvzAddresses is defined and pvzAddresses is not empty %}
      <div class="mt-6">
        <h2 class="text-lg font-semibold text-gray-900 mb-3">Пункты выдачи</h2>
        <ul class="list-disc pl-6 space-y-1 text-gray-800">
          {% for addr in pvzAddresses %}
            <li>{{ addr }}</li>
          {% endfor %}
        </ul>
      </div>
    {% endif %}
  </div>
{% endblock %}


